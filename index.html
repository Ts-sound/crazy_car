<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crazy Car</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
        }

        #gameContainer {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #scoreDisplay {
            color: white;
            font-size: 24px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #highScore {
            color: #ffd700;
            font-size: 18px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #levelDisplay {
            color: #00ff00;
            font-size: 18px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #livesDisplay {
            color: #ff6b6b;
            font-size: 18px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        canvas {
            border: 5px solid #333;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        #instructions {
            color: white;
            margin-top: 15px;
            text-align: center;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="scoreDisplay">Score: 0</div>
        <div id="highScore">High Score: 0</div>
        <div id="levelDisplay">Level: 1</div>
        <div id="livesDisplay">Lives: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <canvas id="gameCanvas" width="400" height="600"></canvas>
        <div id="instructions">Use ‚Üê ‚Üí Arrow Keys or A/D to move | SPACE to pause | Collect power-ups!</div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const highScoreDisplay = document.getElementById('highScore');
        const levelDisplay = document.getElementById('levelDisplay');
        const livesDisplay = document.getElementById('livesDisplay');

        // Game constants
        const LANE_COUNT = 3;
        const LANE_WIDTH = canvas.width / LANE_COUNT;
        const PLAYER_WIDTH = 60;
        const PLAYER_HEIGHT = 100;
        const OBSTACLE_WIDTH = 60;
        const OBSTACLE_HEIGHT = 100;
        const COIN_SIZE = 30;
        const POWERUP_SIZE = 35;

        // Level configurations
        const LEVELS = {
            1: { name: 'Beginner', threshold: 0, speedMultiplier: 1.0, roadColor: '#333', lineColor: '#fff' },
            2: { name: 'Intermediate', threshold: 1000, speedMultiplier: 1.2, roadColor: '#d4a574', lineColor: '#8b7355' },
            3: { name: 'Expert', threshold: 3000, speedMultiplier: 1.4, roadColor: '#2d1b4e', lineColor: '#9b59b6' }
        };

        // Power-up types
        const POWERUP_TYPES = {
            SHIELD: { name: 'Shield', emoji: 'üõ°Ô∏è', color: '#3498db', duration: 300, effect: 'shield' },
            SPEED_BOOST: { name: 'Speed Boost', emoji: '‚ö°', color: '#e67e22', duration: 300, effect: 'speedBoost' },
            SLOW_MOTION: { name: 'Slow Motion', emoji: '‚è∞', color: '#9b59b6', duration: 300, effect: 'slowMotion' },
            MAGNET: { name: 'Magnet', emoji: 'üß≤', color: '#2ecc71', duration: 300, effect: 'magnet' },
            DOUBLE_SCORE: { name: 'Double Score', emoji: '2x', color: '#f1c40f', duration: 480, effect: 'doubleScore' },
            EXTRA_LIFE: { name: 'Extra Life', emoji: '‚ù§Ô∏è', color: '#e74c3c', duration: 0, effect: 'extraLife' }
        };

        // Game state
        let gameState = 'start'; // 'start', 'playing', 'paused', 'gameover', 'levelUp'
        let score = 0;
        let highScore = localStorage.getItem('crazyCarHighScore') || 0;
        let gameSpeed = 5;
        let lastSpeedIncrease = 0;
        let currentLevel = 1;
        let lives = 3;
        let levelUpTimer = 0;

        // Player
        let player = {
            lane: 1, // 0, 1, 2 (left, center, right)
            x: LANE_WIDTH * 1.5 - PLAYER_WIDTH / 2,
            y: canvas.height - PLAYER_HEIGHT - 20,
            targetX: LANE_WIDTH * 1.5 - PLAYER_WIDTH / 2
        };

        // Obstacles
        let obstacles = [];
        let obstacleTimer = 0;
        let obstacleInterval = 60; // frames between obstacles

        // Coins
        let coins = [];
        let coinTimer = 0;
        let coinInterval = 120; // frames between coins

        // Road lines
        let roadLines = [];
        for (let i = 0; i < 6; i++) {
            roadLines.push({ y: i * 120 });
        }

        // Power-ups
        let powerups = [];
        let powerupTimer = 0;
        let powerupInterval = 200;
        let activePowerups = [];

        // Load high score display
        highScoreDisplay.textContent = `High Score: ${highScore}`;
        levelDisplay.textContent = `Level: 1 (${LEVELS[1].name})`;
        livesDisplay.textContent = 'Lives: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';

        // Input handling
        document.addEventListener('keydown', (e) => {
            if (gameState === 'start' || gameState === 'gameover') {
                if (e.key === ' ' || e.key === 'Enter') {
                    startGame();
                }
                return;
            }

            // Pause toggle
            if (e.key === ' ' && (gameState === 'playing' || gameState === 'paused')) {
                e.preventDefault();
                gameState = gameState === 'playing' ? 'paused' : 'playing';
                return;
            }

            if (gameState === 'playing') {
                if ((e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') && player.lane > 0) {
                    player.lane--;
                    player.targetX = player.lane * LANE_WIDTH + LANE_WIDTH / 2 - PLAYER_WIDTH / 2;
                }
                if ((e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') && player.lane < LANE_COUNT - 1) {
                    player.lane++;
                    player.targetX = player.lane * LANE_WIDTH + LANE_WIDTH / 2 - PLAYER_WIDTH / 2;
                }
            }
        });

        function startGame() {
            gameState = 'playing';
            score = 0;
            gameSpeed = 5;
            lastSpeedIncrease = 0;
            currentLevel = 1;
            lives = 3;
            player.lane = 1;
            player.x = LANE_WIDTH * 1.5 - PLAYER_WIDTH / 2;
            player.targetX = player.x;
            obstacles = [];
            coins = [];
            powerups = [];
            activePowerups = [];
            obstacleTimer = 0;
            obstacleInterval = 60;
            coinTimer = 0;
            powerupTimer = 0;
            updateUI();
        }

        function spawnObstacle() {
            const lane = Math.floor(Math.random() * LANE_COUNT);
            const x = lane * LANE_WIDTH + LANE_WIDTH / 2 - OBSTACLE_WIDTH / 2;
            const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#95e1d3'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            obstacles.push({
                x: x,
                y: -OBSTACLE_HEIGHT,
                width: OBSTACLE_WIDTH,
                height: OBSTACLE_HEIGHT,
                color: color
            });
        }

        function spawnCoin() {
            const lane = Math.floor(Math.random() * LANE_COUNT);
            const x = lane * LANE_WIDTH + LANE_WIDTH / 2 - COIN_SIZE / 2;
            coins.push({
                x: x,
                y: -COIN_SIZE,
                size: COIN_SIZE,
                collected: false
            });
        }

        function spawnPowerup() {
            const lane = Math.floor(Math.random() * LANE_COUNT);
            const x = lane * LANE_WIDTH + LANE_WIDTH / 2 - POWERUP_SIZE / 2;
            const types = Object.keys(POWERUP_TYPES);
            const type = types[Math.floor(Math.random() * types.length)];
            const powerupType = POWERUP_TYPES[type];
            
            powerups.push({
                x: x,
                y: -POWERUP_SIZE,
                size: POWERUP_SIZE,
                type: type,
                emoji: powerupType.emoji,
                color: powerupType.color,
                collected: false
            });
        }

        function activatePowerup(type) {
            const powerupData = POWERUP_TYPES[type];
            
            if (type === 'EXTRA_LIFE') {
                lives++;
                updateUI();
                return;
            }
            
            // Check if powerup already active
            const existing = activePowerups.find(p => p.type === type);
            if (existing) {
                existing.timer = powerupData.duration;
            } else {
                activePowerups.push({
                    type: type,
                    timer: powerupData.duration,
                    name: powerupData.name,
                    emoji: powerupData.emoji
                });
            }
        }

        function updatePowerups() {
            activePowerups.forEach((powerup, index) => {
                powerup.timer--;
                if (powerup.timer <= 0) {
                    activePowerups.splice(index, 1);
                }
            });
        }

        function hasActivePowerup(effect) {
            return activePowerups.some(p => POWERUP_TYPES[p.type].effect === effect);
        }

        function getEffectiveSpeed() {
            let speed = gameSpeed * LEVELS[currentLevel].speedMultiplier;
            
            if (hasActivePowerup('speedBoost')) {
                speed *= 1.5;
            }
            if (hasActivePowerup('slowMotion')) {
                speed *= 0.5;
            }
            
            return speed;
        }

        function getScoreMultiplier() {
            return hasActivePowerup('doubleScore') ? 2 : 1;
        }

        function checkLevelUp() {
            const nextLevel = currentLevel + 1;
            if (LEVELS[nextLevel] && score >= LEVELS[nextLevel].threshold) {
                currentLevel = nextLevel;
                gameState = 'levelUp';
                levelUpTimer = 120;
                updateUI();
            }
        }

        function updateUI() {
            scoreDisplay.textContent = `Score: ${score}`;
            levelDisplay.textContent = `Level: ${currentLevel} (${LEVELS[currentLevel].name})`;
            livesDisplay.textContent = 'Lives: ' + '‚ù§Ô∏è'.repeat(lives);
        }

        function update() {
            if (gameState !== 'playing') return;

            const effectiveSpeed = getEffectiveSpeed();
            const scoreMultiplier = getScoreMultiplier();

            // Smooth player movement
            player.x += (player.targetX - player.x) * 0.2;

            // Update road lines
            roadLines.forEach(line => {
                line.y += effectiveSpeed;
                if (line.y > canvas.height) {
                    line.y = -120;
                }
            });

            // Update powerups
            updatePowerups();

            // Spawn obstacles
            obstacleTimer++;
            if (obstacleTimer >= obstacleInterval) {
                spawnObstacle();
                obstacleTimer = 0;
                // Decrease interval based on level
                const minInterval = currentLevel === 1 ? 40 : (currentLevel === 2 ? 30 : 25);
                if (obstacleInterval > minInterval) {
                    obstacleInterval -= 0.1;
                }
            }

            // Spawn coins
            coinTimer++;
            if (coinTimer >= coinInterval) {
                spawnCoin();
                coinTimer = 0;
            }

            // Spawn powerups
            powerupTimer++;
            if (powerupTimer >= powerupInterval) {
                spawnPowerup();
                powerupTimer = 0;
            }

            // Magnet effect - attract coins
            if (hasActivePowerup('magnet')) {
                coins.forEach(coin => {
                    if (coin.y > player.y - 100 && coin.y < player.y + PLAYER_HEIGHT) {
                        const dx = player.x + PLAYER_WIDTH / 2 - (coin.x + coin.size / 2);
                        const dy = player.y + PLAYER_HEIGHT / 2 - (coin.y + coin.size / 2);
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < 150) {
                            coin.x += dx * 0.05;
                            coin.y += dy * 0.05;
                        }
                    }
                });
            }

            // Update obstacles
            obstacles.forEach((obstacle, index) => {
                obstacle.y += effectiveSpeed;

                // Collision detection with player
                if (checkCollision(player.x, player.y, PLAYER_WIDTH, PLAYER_HEIGHT,
                    obstacle.x, obstacle.y, obstacle.width, obstacle.height)) {
                    if (hasActivePowerup('shield')) {
                        // Shield protects - remove obstacle
                        obstacles.splice(index, 1);
                        // Remove shield powerup
                        const shieldIndex = activePowerups.findIndex(p => p.type === 'SHIELD');
                        if (shieldIndex !== -1) {
                            activePowerups.splice(shieldIndex, 1);
                        }
                    } else if (lives > 0) {
                        lives--;
                        updateUI();
                        obstacles.splice(index, 1);
                        if (lives <= 0) {
                            gameOver();
                        }
                    } else {
                        gameOver();
                    }
                }

                // Remove obstacles that are off screen
                if (obstacle.y > canvas.height) {
                    obstacles.splice(index, 1);
                    score += 10 * scoreMultiplier;
                    scoreDisplay.textContent = `Score: ${score}`;
                }
            });

            // Update coins
            coins.forEach((coin, index) => {
                coin.y += effectiveSpeed;

                // Collision detection with player
                if (!coin.collected && checkCollision(player.x, player.y, PLAYER_WIDTH, PLAYER_HEIGHT,
                    coin.x, coin.y, coin.size, coin.size)) {
                    coin.collected = true;
                    score += 100 * scoreMultiplier;
                    scoreDisplay.textContent = `Score: ${score}`;
                    coins.splice(index, 1);
                }

                // Remove coins that are off screen
                if (coin.y > canvas.height) {
                    coins.splice(index, 1);
                }
            });

            // Update powerups (iterate backwards to safely remove items)
            for (let i = powerups.length - 1; i >= 0; i--) {
                const powerup = powerups[i];
                powerup.y += effectiveSpeed;

                // Collision detection with player
                if (!powerup.collected && checkCollision(player.x, player.y, PLAYER_WIDTH, PLAYER_HEIGHT,
                    powerup.x, powerup.y, powerup.size, powerup.size)) {
                    powerup.collected = true;
                    activatePowerup(powerup.type);
                    powerups.splice(i, 1);
                    continue;
                }

                // Remove powerups that are off screen
                if (powerup.y > canvas.height) {
                    powerups.splice(i, 1);
                }
            }

            // Check for level up
            checkLevelUp();

            // Score increases over time
            score += 1 * scoreMultiplier;
            scoreDisplay.textContent = `Score: ${score}`;
        }

        function checkCollision(x1, y1, w1, h1, x2, y2, w2, h2) {
            return x1 < x2 + w2 &&
                   x1 + w1 > x2 &&
                   y1 < y2 + h2 &&
                   y1 + h1 > y2;
        }

        function gameOver() {
            gameState = 'gameover';
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('crazyCarHighScore', highScore);
                highScoreDisplay.textContent = `High Score: ${highScore}`;
            }
        }

        function drawRoad() {
            const levelConfig = LEVELS[currentLevel];
            
            // Road background based on level
            ctx.fillStyle = levelConfig.roadColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Road edges
            ctx.fillStyle = levelConfig.lineColor;
            ctx.fillRect(0, 0, 10, canvas.height);
            ctx.fillRect(canvas.width - 10, 0, 10, canvas.height);

            // Lane dividers
            ctx.fillStyle = levelConfig.lineColor;
            roadLines.forEach(line => {
                ctx.fillRect(canvas.width / 3 - 5, line.y, 10, 60);
                ctx.fillRect((canvas.width / 3) * 2 - 5, line.y, 10, 60);
            });

            // Add glow effect for level 3 (Expert)
            if (currentLevel === 3) {
                ctx.shadowColor = '#9b59b6';
                ctx.shadowBlur = 20;
                ctx.strokeStyle = '#9b59b6';
                ctx.lineWidth = 2;
                ctx.strokeRect(0, 0, canvas.width, canvas.height);
                ctx.shadowBlur = 0;
            }
        }

        function drawPlayer() {
            // Draw shield if active
            if (hasActivePowerup('shield')) {
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 4;
                ctx.shadowColor = '#3498db';
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(player.x + PLAYER_WIDTH / 2, player.y + PLAYER_HEIGHT / 2, PLAYER_WIDTH / 2 + 10, 0, Math.PI * 2);
                ctx.stroke();
                ctx.shadowBlur = 0;
            }

            // Car body
            ctx.fillStyle = '#3498db';
            ctx.fillRect(player.x, player.y, PLAYER_WIDTH, PLAYER_HEIGHT);

            // Car details
            ctx.fillStyle = '#2980b9';
            ctx.fillRect(player.x + 5, player.y + 10, PLAYER_WIDTH - 10, 20); // Windshield
            ctx.fillRect(player.x + 5, player.y + 60, PLAYER_WIDTH - 10, 15); // Rear window

            // Wheels
            ctx.fillStyle = '#333';
            ctx.fillRect(player.x - 5, player.y + 15, 10, 20);
            ctx.fillRect(player.x + PLAYER_WIDTH - 5, player.y + 15, 10, 20);
            ctx.fillRect(player.x - 5, player.y + 65, 10, 20);
            ctx.fillRect(player.x + PLAYER_WIDTH - 5, player.y + 65, 10, 20);

            // Headlights
            ctx.fillStyle = '#f1c40f';
            ctx.beginPath();
            ctx.arc(player.x + 10, player.y, 5, 0, Math.PI * 2);
            ctx.arc(player.x + PLAYER_WIDTH - 10, player.y, 5, 0, Math.PI * 2);
            ctx.fill();

            // Speed boost effect
            if (hasActivePowerup('speedBoost')) {
                ctx.fillStyle = 'rgba(230, 126, 34, 0.3)';
                ctx.fillRect(player.x - 10, player.y + PLAYER_HEIGHT, PLAYER_WIDTH + 20, 20);
            }

            // Magnet effect
            if (hasActivePowerup('magnet')) {
                ctx.strokeStyle = '#2ecc71';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.arc(player.x + PLAYER_WIDTH / 2, player.y + PLAYER_HEIGHT / 2, 100, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]);
            }
        }

        function drawObstacles() {
            obstacles.forEach(obstacle => {
                // Car body
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);

                // Car details
                ctx.fillStyle = '#333';
                ctx.fillRect(obstacle.x + 5, obstacle.y + 10, obstacle.width - 10, 20);
                ctx.fillRect(obstacle.x + 5, obstacle.y + 60, obstacle.width - 10, 15);

                // Wheels
                ctx.fillStyle = '#333';
                ctx.fillRect(obstacle.x - 5, obstacle.y + 15, 10, 20);
                ctx.fillRect(obstacle.x + obstacle.width - 5, obstacle.y + 15, 10, 20);
                ctx.fillRect(obstacle.x - 5, obstacle.y + 65, 10, 20);
                ctx.fillRect(obstacle.x + obstacle.width - 5, obstacle.y + 65, 10, 20);
            });
        }

        function drawCoins() {
            coins.forEach(coin => {
                ctx.fillStyle = '#f1c40f';
                ctx.beginPath();
                ctx.arc(coin.x + coin.size / 2, coin.y + coin.size / 2, coin.size / 2, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = '#f39c12';
                ctx.beginPath();
                ctx.arc(coin.x + coin.size / 2, coin.y + coin.size / 2, coin.size / 3, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = '#f1c40f';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('$', coin.x + coin.size / 2, coin.y + coin.size / 2);

                // Glow effect when magnet is active
                if (hasActivePowerup('magnet')) {
                    ctx.strokeStyle = '#2ecc71';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(coin.x + coin.size / 2, coin.y + coin.size / 2, coin.size / 2 + 5, 0, Math.PI * 2);
                    ctx.stroke();
                }
            });
        }

        function drawPowerups() {
            powerups.forEach(powerup => {
                // Power-up background
                ctx.fillStyle = powerup.color;
                ctx.beginPath();
                ctx.arc(powerup.x + powerup.size / 2, powerup.y + powerup.size / 2, powerup.size / 2, 0, Math.PI * 2);
                ctx.fill();

                // Glow effect
                ctx.shadowColor = powerup.color;
                ctx.shadowBlur = 15;
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(powerup.x + powerup.size / 2, powerup.y + powerup.size / 2, powerup.size / 2 - 2, 0, Math.PI * 2);
                ctx.stroke();
                ctx.shadowBlur = 0;

                // Emoji
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(powerup.emoji, powerup.x + powerup.size / 2, powerup.y + powerup.size / 2);
            });
        }

        function drawActivePowerups() {
            if (activePowerups.length === 0) return;

            const startY = 10;
            const spacing = 25;

            activePowerups.forEach((powerup, index) => {
                const y = startY + index * spacing;
                const progress = powerup.timer / POWERUP_TYPES[powerup.type].duration;

                // Background bar
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(10, y, 150, 20);

                // Progress bar
                ctx.fillStyle = POWERUP_TYPES[powerup.type].color;
                ctx.fillRect(10, y, 150 * progress, 20);

                // Emoji and name
                ctx.font = '14px Arial';
                ctx.textAlign = 'left';
                ctx.textBaseline = 'middle';
                ctx.fillText(`${powerup.emoji} ${powerup.name}`, 15, y + 10);

                // Time remaining
                const seconds = Math.ceil(powerup.timer / 60);
                ctx.fillStyle = '#fff';
                ctx.textAlign = 'right';
                ctx.fillText(`${seconds}s`, 155, y + 10);
            });
        }

        function drawLevelUpScreen() {
            if (gameState !== 'levelUp') return;

            levelUpTimer--;
            if (levelUpTimer <= 0) {
                gameState = 'playing';
                return;
            }

            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff00';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('LEVEL UP!', canvas.width / 2, canvas.height / 2 - 30);

            ctx.fillStyle = '#fff';
            ctx.font = '32px Arial';
            ctx.fillText(`Level ${currentLevel}`, canvas.width / 2, canvas.height / 2 + 20);

            ctx.font = '24px Arial';
            ctx.fillText(LEVELS[currentLevel].name, canvas.width / 2, canvas.height / 2 + 60);
        }

        function drawStartScreen() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#fff';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('CRAZY CAR', canvas.width / 2, canvas.height / 2 - 100);

            ctx.font = '24px Arial';
            ctx.fillText('Press SPACE or ENTER to Start', canvas.width / 2, canvas.height / 2 - 50);

            ctx.font = '16px Arial';
            ctx.fillStyle = '#3498db';
            ctx.fillText('üõ°Ô∏è Shield - Invincibility', canvas.width / 2, canvas.height / 2);
            ctx.fillStyle = '#e67e22';
            ctx.fillText('‚ö° Speed Boost - Faster scoring', canvas.width / 2, canvas.height / 2 + 25);
            ctx.fillStyle = '#9b59b6';
            ctx.fillText('‚è∞ Slow Motion - Easier dodging', canvas.width / 2, canvas.height / 2 + 50);
            ctx.fillStyle = '#2ecc71';
            ctx.fillText('üß≤ Magnet - Attract coins', canvas.width / 2, canvas.height / 2 + 75);
            ctx.fillStyle = '#f1c40f';
            ctx.fillText('2x Double Score - 2x points', canvas.width / 2, canvas.height / 2 + 100);
            ctx.fillStyle = '#e74c3c';
            ctx.fillText('‚ù§Ô∏è Extra Life - +1 life', canvas.width / 2, canvas.height / 2 + 125);

            ctx.fillStyle = '#fff';
            ctx.font = '18px Arial';
            ctx.fillText('Use ‚Üê ‚Üí Arrow Keys or A/D to Move', canvas.width / 2, canvas.height / 2 + 165);
            ctx.fillText('3 Levels: Beginner ‚Üí Intermediate ‚Üí Expert', canvas.width / 2, canvas.height / 2 + 190);
        }

        function drawGameOverScreen() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#e74c3c';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 80);

            ctx.fillStyle = '#fff';
            ctx.font = '32px Arial';
            ctx.fillText(`Score: ${score}`, canvas.width / 2, canvas.height / 2 - 30);

            ctx.font = '20px Arial';
            ctx.fillText(`Level Reached: ${currentLevel} (${LEVELS[currentLevel].name})`, canvas.width / 2, canvas.height / 2 + 10);

            if (score >= highScore && score > 0) {
                ctx.fillStyle = '#f1c40f';
                ctx.font = '24px Arial';
                ctx.fillText('NEW HIGH SCORE!', canvas.width / 2, canvas.height / 2 + 50);
            }

            ctx.fillStyle = '#fff';
            ctx.font = '20px Arial';
            ctx.fillText('Press SPACE or ENTER to Restart', canvas.width / 2, canvas.height / 2 + 90);
        }

        function drawPauseScreen() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Pause icon (two vertical bars)
            ctx.fillStyle = '#fff';
            ctx.fillRect(canvas.width / 2 - 35, canvas.height / 2 - 40, 20, 80);
            ctx.fillRect(canvas.width / 2 + 15, canvas.height / 2 - 40, 20, 80);

            // PAUSED text
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2 + 70);

            // Instructions
            ctx.font = '20px Arial';
            ctx.fillText('Press SPACE to Resume', canvas.width / 2, canvas.height / 2 + 110);
        }

        function render() {
            drawRoad();
            drawCoins();
            drawPowerups();
            drawObstacles();
            drawPlayer();
            drawActivePowerups();

            if (gameState === 'start') {
                drawStartScreen();
            } else if (gameState === 'gameover') {
                drawGameOverScreen();
            } else if (gameState === 'levelUp') {
                drawLevelUpScreen();
            } else if (gameState === 'paused') {
                drawPauseScreen();
            }
        }

        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>